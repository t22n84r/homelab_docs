server:
  # Threads & sockets
  num-threads: 3
  outgoing-range: 8192
  so-rcvbuf: 4m
  so-sndbuf: 4m

  # Privacy & hardening (add to what pi-hole.conf already has)
  qname-minimisation: yes
  harden-referral-path: yes
  harden-algo-downgrade: yes
  harden-below-nxdomain: yes
  aggressive-nsec: yes
  val-clean-additional: yes
  hide-identity: yes
  hide-version: yes
  minimal-responses: yes

  # Safer EDNS size (optional: you can keep 1472 from pi-hole.conf if it works fine)
  edns-buffer-size: 1232
  max-udp-size: 1232

  # Caching / freshness
  rrset-cache-size: 256m
  msg-cache-size: 128m
  key-cache-size: 32m
  neg-cache-size: 20m
  cache-min-ttl: 60
  cache-max-ttl: 86400
  cache-max-negative-ttl: 3600
  prefetch: yes
  prefetch-key: yes
  serve-expired: yes
  serve-expired-ttl: 86400

  # Stats (quiet logs; turn up if debugging)
  verbosity: 1
  log-queries: no
  extended-statistics: yes

server:
  root-hints: "/var/lib/unbound/root.hints"
